<!--pages/word-detail/word-detail.wxml-->
<view class="word-detail-container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- å•è¯è¯¦æƒ…å†…å®¹ -->
  <view wx:else class="detail-content">
    <!-- å•è¯ä¸»ä¿¡æ¯å¡ç‰‡ -->
    <view class="word-main-card">
      <view class="word-header">
        <view class="word-title-section">
          <text class="word-text">{{wordInfo.word}}</text>
          <view class="pronunciation-section">
            <text class="pronunciation">{{wordInfo.pronunciation}}</text>
            <view 
              class="play-btn {{isPlaying ? 'playing' : ''}}" 
              bindtap="playPronunciation"
            >
              <text class="play-icon">{{isPlaying ? 'â¸ï¸' : 'ğŸ”Š'}}</text>
            </view>
          </view>
        </view>
        
        <view class="word-actions">
          <view 
            class="favorite-btn {{wordInfo.isFavorite ? 'favorited' : ''}}"
            bindtap="toggleFavorite"
          >
            <text class="favorite-icon">{{wordInfo.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
          </view>
        </view>
      </view>

      <view class="word-basic-info">
        <view class="pos-translation">
          <text class="part-of-speech">{{wordInfo.partOfSpeech}}</text>
          <text class="main-translation">{{wordInfo.translation}}</text>
        </view>
        
        <view class="word-meta">
          <text class="source-info">{{wordInfo.textbook}} {{wordInfo.grade}} {{wordInfo.unit}}</text>
          <text class="importance-tag importance-{{wordInfo.importance === 'å¿…è€ƒ' ? 'required' : wordInfo.importance === 'å¸¸è€ƒ' ? 'common' : 'understand'}}">
            {{wordInfo.importance}}
          </text>
        </view>
      </view>

      <!-- æŒæ¡ç¨‹åº¦ -->
      <view class="mastery-section">
        <view class="mastery-header">
          <text class="mastery-label">æŒæ¡ç¨‹åº¦</text>
          <text class="mastery-value">{{masteryLevel}}%</text>
        </view>
        <view class="mastery-bar">
          <view class="mastery-fill" style="width: {{masteryLevel}}%"></view>
        </view>
        <view class="mastery-actions">
          <text 
            class="mastery-btn" 
            data-level="25"
            bindtap="updateMasteryLevel"
          >ä¸è®¤è¯†</text>
          <text 
            class="mastery-btn" 
            data-level="50"
            bindtap="updateMasteryLevel"
          >æœ‰å°è±¡</text>
          <text 
            class="mastery-btn" 
            data-level="75"
            bindtap="updateMasteryLevel"
          >è®¤è¯†</text>
          <text 
            class="mastery-btn" 
            data-level="100"
            bindtap="updateMasteryLevel"
          >å¾ˆç†Ÿæ‚‰</text>
        </view>
      </view>
    </view>

    <!-- è¯¦ç»†é‡Šä¹‰ -->
    <view class="definitions-card">
      <view class="card-header">
        <text class="card-title">ğŸ“ è¯¦ç»†é‡Šä¹‰</text>
      </view>
      <view class="definitions-list">
        <view 
          wx:for="{{wordInfo.definitions}}" 
          wx:key="index"
          class="definition-item"
        >
          <text class="definition-number">{{index + 1}}.</text>
          <text class="definition-text">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- ä¾‹å¥å­¦ä¹  -->
    <view class="example-card">
      <view class="card-header">
        <text class="card-title">ğŸ“– ä¾‹å¥å­¦ä¹ </text>
      </view>
      <view class="example-content">
        <view class="example-sentence">
          <text class="example-en">{{wordInfo.exampleSentence}}</text>
          <view class="example-actions">
            <text class="example-play" bindtap="playPronunciation">ğŸ”Š</text>
          </view>
        </view>
        <text class="example-cn">{{wordInfo.exampleTranslation}}</text>
      </view>
    </view>

    <!-- åŒä¹‰è¯åä¹‰è¯ -->
    <view class="synonyms-card">
      <view class="card-header">
        <text class="card-title">ğŸ”— åŒä¹‰è¯ & åä¹‰è¯</text>
      </view>
      <view class="synonyms-content">
        <view class="synonym-section">
          <text class="synonym-label">åŒä¹‰è¯:</text>
          <view class="synonym-list">
            <text 
              wx:for="{{wordInfo.synonyms}}" 
              wx:key="index"
              class="synonym-item"
              data-word="{{item}}"
              bindtap="viewRelatedWord"
            >{{item}}</text>
          </view>
        </view>
        
        <view class="synonym-section">
          <text class="synonym-label">åä¹‰è¯:</text>
          <view class="synonym-list">
            <text 
              wx:for="{{wordInfo.antonyms}}" 
              wx:key="index"
              class="synonym-item antonym"
              data-word="{{item}}"
              bindtap="viewRelatedWord"
            >{{item}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- è®°å¿†æŠ€å·§ -->
    <view class="memory-tips-card">
      <view class="card-header">
        <text class="card-title">ğŸ§  è®°å¿†æŠ€å·§</text>
      </view>
      <view class="memory-tips-list">
        <view 
          wx:for="{{memoryTips}}" 
          wx:key="index"
          class="memory-tip-item"
        >
          <view class="tip-header">
            <text class="tip-type">{{item.type}}</text>
          </view>
          <text class="tip-content">{{item.content}}</text>
        </view>
      </view>
    </view>

    <!-- è¯æºä¿¡æ¯ -->
    <view class="etymology-card">
      <view class="card-header">
        <text class="card-title">ğŸ“š è¯æºä¿¡æ¯</text>
      </view>
      <text class="etymology-text">{{wordInfo.etymology}}</text>
    </view>

    <!-- å­¦ä¹ ç»Ÿè®¡ -->
    <view class="study-stats-card">
      <view class="card-header">
        <text class="card-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</text>
      </view>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{studyCount}}</text>
          <text class="stat-label">å­¦ä¹ æ¬¡æ•°</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{wordInfo.lastReviewTime}}</text>
          <text class="stat-label">ä¸Šæ¬¡å¤ä¹ </text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{masteryLevel}}%</text>
          <text class="stat-label">æŒæ¡ç¨‹åº¦</text>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <view class="action-btn primary" bindtap="startPractice">
        <text class="btn-text">å¼€å§‹ç»ƒä¹ </text>
      </view>
      <view class="action-btn secondary" bindtap="shareWord">
        <text class="btn-text">åˆ†äº«å•è¯</text>
      </view>
    </view>
  </view>
</view>