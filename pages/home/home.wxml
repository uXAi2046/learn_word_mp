<!--pages/home/home.wxml-->
<view class="home-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-left">
      <image class="user-avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill" bindtap="onAvatarTap"></image>
    </view>
    <view class="nav-center">
      <text class="app-name">è‹±è¯­å•è¯èƒŒè¯µ</text>
    </view>
    <view class="nav-right">
      <text class="settings-icon" bindtap="onSettingsTap">âš™ï¸</text>
    </view>
  </view>

  <!-- ä»Šæ—¥ç›®æ ‡å¡ç‰‡ -->
  <view class="goal-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ¯ ä»Šæ—¥ç›®æ ‡</text>
    </view>
    <view class="goal-content">
      <text class="goal-text">ç›®æ ‡: å­¦ä¹ {{dailyGoal}}ä¸ªæ–°å•è¯</text>
      <view class="progress-container">
        <view class="progress">
          <view class="progress-bar" style="width: {{goalProgress}}%"></view>
        </view>
        <text class="progress-text">{{currentProgress}}/{{dailyGoal}}</text>
      </view>
      <button class="btn btn-primary" bindtap="onContinueStudy">
        {{currentProgress >= dailyGoal ? 'å·²å®Œæˆç›®æ ‡' : 'ç»§ç»­å­¦ä¹ '}}
      </button>
    </view>
  </view>

  <!-- å­¦ä¹ æ¦‚è§ˆå¡ç‰‡ -->
  <view class="overview-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ“Š å­¦ä¹ æ¦‚è§ˆ</text>
    </view>
    <view class="overview-content">
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-label">è¿ç»­å­¦ä¹ </text>
          <text class="stat-value">{{continuousDays}}å¤©</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">ç­‰çº§</text>
          <text class="stat-value">â­ Lv.{{userLevel}}</text>
        </view>
      </view>
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-label">æœ¬å‘¨ç­”é¢˜</text>
          <text class="stat-value">{{weeklyQuestions}}é¢˜</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">æ­£ç¡®ç‡</text>
          <text class="stat-value">{{correctRate}}%</text>
        </view>
      </view>
      <button class="btn btn-secondary" bindtap="onViewDetails">æŸ¥çœ‹è¯¦æƒ…</button>
    </view>
  </view>

  <!-- å¿«é€Ÿå¼€å§‹å¡ç‰‡ -->
  <view class="quick-start-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸš€ å¿«é€Ÿå¼€å§‹</text>
    </view>
    <view class="quick-actions">
      <view class="action-grid">
        <view class="action-item" bindtap="onQuizTap">
          <view class="action-icon">ğŸ“</view>
          <text class="action-text">ç­”é¢˜æ¨¡å¼</text>
        </view>
        <view class="action-item" bindtap="onWordbankTap">
          <view class="action-icon">ğŸ“–</view>
          <text class="action-text">å•è¯åº“</text>
        </view>
      </view>
      <view class="action-grid">
        <view class="action-item" bindtap="onKnowledgeTap">
          <view class="action-icon">ğŸ’¡</view>
          <text class="action-text">çŸ¥è¯†ç‚¹</text>
        </view>
        <view class="action-item" bindtap="onProfileTap">
          <view class="action-icon">ğŸ‘¤</view>
          <text class="action-text">ä¸ªäººä¸­å¿ƒ</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘æˆå°±å¡ç‰‡ -->
  <view class="achievements-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ† æœ€è¿‘æˆå°±</text>
    </view>
    <view class="achievements-content">
      <view class="achievement-list">
        <view class="achievement-item" wx:for="{{recentAchievements}}" wx:key="id">
          <text class="achievement-icon">{{item.icon}}</text>
          <text class="achievement-text">{{item.title}}</text>
        </view>
      </view>
      <button class="btn btn-secondary" bindtap="onViewAllAchievements">æŸ¥çœ‹å…¨éƒ¨</button>
    </view>
  </view>

  <!-- æ•™æé€‰æ‹©æç¤º -->
  <view class="textbook-hint card fade-in" wx:if="{{!selectedTextbook}}">
    <view class="hint-content">
      <text class="hint-icon">ğŸ“š</text>
      <text class="hint-text">è¯·å…ˆé€‰æ‹©æ‚¨çš„æ•™æç‰ˆæœ¬</text>
      <button class="btn btn-primary" bindtap="onSelectTextbook">é€‰æ‹©æ•™æ</button>
    </view>
  </view>
</view>