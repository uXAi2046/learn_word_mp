<!--å­¦ä¹ è¯¦æƒ…é¡µé¢-->
<view class="container">
  <!-- å­¦ä¹ è¿›åº¦å¡ç‰‡ -->
  <view class="progress-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ¯ ä»Šæ—¥å­¦ä¹ è¿›åº¦</text>
      <text class="progress-percentage">{{progressPercentage}}%</text>
    </view>
    <view class="progress-content">
      <view class="progress-bar-container">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{progressPercentage}}%"></view>
        </view>
      </view>
      <view class="progress-stats">
        <text class="progress-text">å·²å­¦ä¹  {{learnedCount}}/{{totalCount}} ä¸ªå•è¯</text>
        <text class="time-text">ç”¨æ—¶: {{studyTime}}</text>
      </view>
    </view>
  </view>

  <!-- å½“å‰å•è¯å¡ç‰‡ -->
  <view class="word-card card fade-in" wx:if="{{currentWord}}">
    <view class="word-header">
      <view class="word-main">
        <text class="word-text">{{currentWord.word}}</text>
        <view class="word-actions">
          <button class="icon-btn" bindtap="onPlayAudio">
            <text class="icon">ğŸ”Š</text>
          </button>
          <button class="icon-btn" bindtap="onToggleFavorite" aria-label="æ”¶è—">
            <text class="icon favorite-icon" style="color: {{currentWord.isFavorite ? '#E11D48' : '#1F2937'}}">{{currentWord.isFavorite ? 'â¤ï¸' : 'â™¡'}}</text>
          </button>
        </view>
      </view>
      <text class="phonetic-text">{{currentWord.phonetic}}</text>
    </view>
    
    <view class="word-content">
      <view class="word-meaning">
        <text class="part-of-speech">{{currentWord.partOfSpeech}}</text>
        <text class="meaning-text">{{currentWord.meaning}}</text>
      </view>
      
      <view class="word-example" wx:if="{{currentWord.example}}">
        <text class="example-label">ä¾‹å¥:</text>
        <text class="example-text">{{currentWord.example.english}}</text>
        <text class="example-translation">{{currentWord.example.chinese}}</text>
      </view>
      
      <view class="mastery-level">
        <text class="mastery-label">ç†Ÿç»ƒåº¦:</text>
        <view class="mastery-bar">
          <view class="mastery-fill" style="width: {{currentWord.masteryLevel}}%"></view>
        </view>
        <text class="mastery-text">{{currentWord.masteryLevel}}%</text>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ æ¨¡å¼é€‰æ‹© -->
  <view class="mode-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ“š å­¦ä¹ æ¨¡å¼</text>
    </view>
    <view class="mode-content">
      <view class="mode-grid">
        <view class="mode-item {{selectedMode === 'recognition' ? 'active' : ''}}" 
                bindtap="onSelectMode" data-mode="recognition">
          <text class="mode-icon">ğŸ‘ï¸</text>
          <text class="mode-name">è®¤è¯†æ¨¡å¼</text>
          <text class="mode-desc">çœ‹è‹±æ–‡é€‰ä¸­æ–‡</text>
        </view>
        
        <view class="mode-item {{selectedMode === 'spelling' ? 'active' : ''}}" 
                bindtap="onSelectMode" data-mode="spelling">
          <text class="mode-icon">âœï¸</text>
          <text class="mode-name">æ‹¼å†™æ¨¡å¼</text>
          <text class="mode-desc">å¬éŸ³é¢‘å†™å•è¯</text>
        </view>
        
        <view class="mode-item {{selectedMode === 'translation' ? 'active' : ''}}" 
                bindtap="onSelectMode" data-mode="translation">
          <text class="mode-icon">ğŸ”„</text>
          <text class="mode-name">ç¿»è¯‘æ¨¡å¼</text>
          <text class="mode-desc">çœ‹ä¸­æ–‡é€‰è‹±æ–‡</text>
        </view>
        
        <view class="mode-item {{selectedMode === 'review' ? 'active' : ''}}" 
                bindtap="onSelectMode" data-mode="review">
          <text class="mode-icon">ğŸ“–</text>
          <text class="mode-name">å¤ä¹ æ¨¡å¼</text>
          <text class="mode-desc">å¤ä¹ å·²å­¦å•è¯</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="stats-card card fade-in">
    <view class="card-header">
      <text class="card-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</text>
    </view>
    <view class="stats-content">
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{todayStats.newWords}}</text>
          <text class="stat-label">ä»Šæ—¥æ–°è¯</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{todayStats.reviewWords}}</text>
          <text class="stat-label">å¤ä¹ å•è¯</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{todayStats.correctRate}}%</text>
          <text class="stat-label">æ­£ç¡®ç‡</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{todayStats.studyTime}}</text>
          <text class="stat-label">å­¦ä¹ æ—¶é•¿</text>
        </view>
      </view>
    </view>
  </view>

  <view class="action-buttons">
    <view class="btn btn-secondary" role="button" aria-label="æš‚åœå­¦ä¹ " bindtap="onPauseStudy">
      æš‚åœå­¦ä¹ 
    </view>
    <view class="btn btn-primary {{!selectedMode ? 'disabled' : ''}}" role="button" aria-label="{{currentWord ? 'ä¸‹ä¸€ä¸ªå•è¯' : 'å¼€å§‹å­¦ä¹ '}}" bindtap="{{!selectedMode ? '' : 'onContinueNext'}}">
      {{currentWord ? 'ä¸‹ä¸€ä¸ªå•è¯' : 'å¼€å§‹å­¦ä¹ '}}
    </view>
  </view>

  <!-- å­¦ä¹ æç¤º -->
  <view class="tip-card card fade-in" wx:if="{{showTip}}">
    <view class="tip-content">
      <text class="tip-icon">ğŸ’¡</text>
      <text class="tip-text">{{tipText}}</text>
      <view class="tip-close" bindtap="onCloseTip">
        <text class="icon">âœ•</text>
      </view>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-overlay" wx:if="{{isLoading}}">
  <view class="loading-content">
    <text class="loading-icon">ğŸ“š</text>
    <text class="loading-text">æ­£åœ¨åŠ è½½å•è¯...</text>
  </view>
</view>